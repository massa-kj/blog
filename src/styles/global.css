@import "tailwindcss";
@import "tailwindcss" source('./src/**/*.{astro,html,js,jsx,ts,tsx,md,mdx}');
@plugin '@tailwindcss/typography';

/* The Tailwind plugin now applies utility classes with the `dark:` prefix to elements under the `.dark` class. */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* ----------------------- */
  /* Colors                  */
  /* ----------------------- */
  --color-bg: theme(colors.orange.100);               /* Global background */
  --color-surface: theme(colors.orange.300);            /* Main, cards, etc. */
  --color-surface-variant: theme(colors.orange.200); /* Sidebar, lists, etc. */
  --color-border: theme(colors.zinc.200);          /* Borders */
  --color-primary: theme(colors.blue.600);         /* Accent (buttons, etc.) */
  --color-primary-hover: theme(colors.blue.700);   /* On hover */
  --color-secondary: theme(colors.teal.600);       /* Secondary */
  --color-text: theme(colors.zinc.900);            /* Main text */
  --color-muted: theme(colors.zinc.500);           /* Sub text */
  --color-link: theme(colors.blue.700);            /* Links */
  --color-tag-bg: theme(colors.zinc.200);          /* Tag background */
  --color-tag-text: theme(colors.zinc.800);        /* Tag text */
  --color-h2-bg: #f7faff;
  --color-h2-text: #1a237e;
  --color-h2-accent: #1976d2;
  --color-h3-bg: #f7faff;
  --color-h3-text: #00695c;
  --color-h3-accent: #26a69a;
  --color-h4-bg: #f7faff;
  --color-h4-text: #004d40;
  --color-h4-accent: #009688;

  /* Icon */
  --color-icon: theme(colors.blue.600);

  /* ----------------------- */
  /* Font                    */
  /* ----------------------- */
  /* --font-sans: theme(fontFamily.sans); */
  /* --font-mono: theme(fontFamily.mono); */

  /* ----------------------- */
  /* Spacing                 */
  /* ----------------------- */
  --space-xs: 0.25rem;   /* 4px */
  --space-sm: 0.5rem;    /* 8px */
  --space-md: 1rem;      /* 16px */
  --space-lg: 2rem;      /* 32px */
  --space-xl: 4rem;      /* 64px */
  --header-height: 4rem;   /* Header height */
  --sidebar-width: 15rem;    /* Sidebar width */
  --rightbar-width: 16rem;   /* Right sidebar width */
  /* temp */
  --spacing-header: 4rem;
  --spacing-left-sidebar: 70vw;
  --spacing-left-sidebar-md: 22rem;
  --spacing-right-sidebar: 16rem;

  /* ----------------------- */
  /* Border, Shadow          */
  /* ----------------------- */
  --radius-sm: 0.25rem;   /* 4px */
  --radius-md: 0.5rem;    /* 8px */
  --radius-lg: 1rem;      /* 16px */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 12px 0 rgb(0 0 0 / 0.08);
}

/* ----------------------- */
/* Dark Mode               */
/* ----------------------- */
.dark {
  --color-bg: theme(colors.gray.900);               /* Global background */
  --color-surface: theme(colors.gray.700);          /* Main, cards, etc. */
  --color-surface-variant: theme(colors.gray.800);  /* Sidebar, lists, etc. */
  --color-border: theme(colors.zinc.700);           /* Borders */
  --color-primary: theme(colors.blue.400);          /* Accent */
  --color-primary-hover: theme(colors.blue.300);    /* On hover */
  --color-secondary: theme(colors.teal.400);        /* Secondary */
  --color-text: theme(colors.gray.100);             /* Main text */
  --color-muted: theme(colors.zinc.400);            /* Sub text */
  --color-link: theme(colors.blue.300);             /* Links */
  --color-tag-bg: theme(colors.zinc.700);           /* Tag background */
  --color-tag-text: theme(colors.zinc.100);         /* Tag text */
  --color-icon: theme(colors.blue.400);             /* Icon color */
  --color-h2-bg: #263238;
  --color-h2-text: #bbdefb;
  --color-h2-accent: #90caf9;
  --color-h3-bg: #263238;
  --color-h3-text: #80cbc4;
  --color-h3-accent: #4db6ac;
  --color-h4-bg: #263238;
  --color-h4-text: #b2ebf2;
  --color-h4-accent: #80deea;
}

@layer base {
  body {
    @apply antialiased;
    background-color: var(--color-bg);
    color: var(--color-text);
    /* min-height: 100vh; */
    margin: 0;
    padding: 0;
  }

  summary {
    list-style: none;
  }
  summary::-webkit-details-marker {
    display: none;
  }
}

@layer components {
  .site-title {
    @apply flex h-header items-center px-6 text-2xl font-extrabold;
  }

  .sidebar-left {
    @apply fixed left-0 top-0 z-20 h-screen w-left-sidebar -translate-x-full transform transition-transform duration-300 peer-checked:translate-x-0 md:w-left-sidebar-md md:translate-x-0;

    .sidebar-left-content {
      @apply flex flex-col h-full;
      background-color: var(--color-surface-variant);
    }
    .sidebar-left-toggle {
      @apply absolute -top-20 opacity-0;
    }
  }

  .sidebar-right {
    @apply hidden xl:block w-64 h-full fixed right-0 top-16;

    .sidebar-right-content {
      @apply h-full overflow-y-auto p-4 border-l border-gray-800;
      background: var(--color-bg);
    }
  }

  .header {
    @apply fixed inset-x-0 top-0 z-10 h-header transition-transform duration-300 peer-checked:translate-x-left-sidebar md:pl-left-sidebar-md md:peer-checked:translate-x-0;

    .header-contents {
      @apply flex h-full items-center justify-between bg-gray-700 px-4 shadow;
      background: var(--color-surface);
    }
  }

  .menu-list {
    @apply flex items-center justify-between cursor-pointer rounded
  }

  .menu-item {
    @apply block px-4 py-2 rounded transition;
  }
  .menu-item:hover {
    background: var(--color-surface);
  }

  .breadcrumbs {
    @apply hidden w-full items-center justify-between md:flex
  }

  .main-area {
    @apply flex flex-col min-h-screen
      pt-header xl:mr-right-sidebar transition-transform duration-300 peer-checked:translate-x-left-sidebar
      md:ml-left-sidebar-md md:translate-x-0;
  }
  .main-content {
    @apply flex-1 w-full max-w-3xl mx-auto px-6 py-8;
  }

  .my-prose {
    @apply prose dark:prose-invert;
    prose-h1:font-bold prose-h1:text-xl prose-a:text-blue-600 prose-p:text-justify prose-img:rounded-xl;

    h2 {
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--color-h2-text);
      border-left: 4px solid var(--color-h2-accent);
      padding-left: 0.7em;
      padding-top: 0.1em;
      padding-bottom: 0.1em;
      background: var(--color-h2-bg);
      border-radius: 3px;
    }

    h3 {
      font-size: 1.4rem;
      font-weight: 500;
      color: var(--color-h3-text);
      border-left: 4px solid var(--color-h3-accent);
      padding-left: 0.7em;
      padding-top: 0.1em;
      padding-bottom: 0.1em;
      background: var(--color-h3-bg);
      border-radius: 3px;
    }

    h4 {
      font-size: 1.1rem;
      font-weight: 400;
      color: var(--color-h4-text);
      border-left: 4px solid var(--color-h4-accent);
      padding-left: 0.7em;
      padding-top: 0.1em;
      padding-bottom: 0.1em;
      background: var(--color-h4-bg);
      border-radius: 3px;
    }

    details {
      @apply bg-gray-100 dark:bg-gray-800 rounded-lg p-4;

      summary {
        @apply cursor-pointer font-semibold text-gray-900 dark:text-gray-100;
      }
    }
  }

  .footer {
    @apply p-4 mt-12 text-center text-sm;
  }

  .tag-btn {
    @apply inline-block rounded-md border px-2 py-1 transition;
    background-color: var(--color-surface-variant);
    border-color: var(--color-border);
  }
  .tag-btn:hover {
    background-color: var(--color-tag-bg);
    border-color: var(--color-primary-hover);
  }

  .post-nav-btn {
    @apply flex flex-col justify-center border p-4 border-gray-700 transition;
    background-color: var(--color-bg);
  }
  .post-nav-btn-hoverable:hover {
    background-color: var(--color-surface);
  }

  .card {
    @apply rounded-lg block p-6 border transition;
    background-color: var(--color-surface-variant);
    border-color: var(--color-border);

    .card-title {
      @apply text-xl font-bold break-words
    }
  }
  .card:hover {
    background-color: var(--color-surface);
    border-color: var(--color-primary);
  }

  .page-title {
    @apply text-3xl font-bold mb-2 break-words
  }

  .hoverable-text {
    @apply transition
  }
  .hoverable-text:hover,
  .group:hover .hoverable-text {
    color: var(--color-primary);
    text-decoration: underline;
  }
}

